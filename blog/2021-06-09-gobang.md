---
title: 五子棋遊戲 - 勝利判斷
tags: [Frontend]
description: 實作五子棋遊戲，並可以線上對弈.
hide_table_of_contents: false
---

實作五子棋遊戲，可以判別勝利外，也可以~~線上對弈~~

<!--truncate-->

```
目前程式碼有些問題，沒辦法線上配對，待完成後大家再來玩看看
```

[Demo](https://liaoyingkai.github.io/socket_game/build/#/gomoku)

沒有朋友可以自己開兩個視窗自己玩~~嗚嗚嗚~~

## 前言

很久之前做了一個五子棋的遊戲，並配合 socket 可以連線對弈，而在過程中最困難的是如何判斷勝利，在先不搜尋網絡上解法的前提下，自己寫了一個判斷的方式，分享給大家，過程也感謝恩平給我質點迷津與改善的方式

## 思考流程

一開始當然會想要用最暴力的解法，當每下一次就搜尋這個棋盤，有符合的就跳勝利，但這個比較不切實際，所以就改成了下面的寫法

每一個達成的勝利一定跟現在下的這一個棋子有關(因爲一定是我剛好下了這一個剛好連成五個，正常不會有勝利早就出來但沒判斷到的狀況)，所以就以這一個點爲出發點，往他的**上下**、**左右**、**斜角**判斷：

以判斷左右爲例，有幾個注意的地方：

- 左右是固定 Y 軸，因爲畫棋盤的方式是第一維爲縱軸，第二維爲橫軸，所以轉換成二維陣列的形式，要固定的第一個數字，只移動第二個數字
- 有一個記錄目前棋子數量的變數，預設爲 1 (因爲從自己開始移動，所以至少會有 1)
- 因爲五個就獲勝，所以最多往左四次或往右四次；設定一個迴圈，一次加一並最多往旁邊四個
- 而如果往左邊的這一個與目前的棋子相同顏色，就會繼續跑下一個 for，不然就跳出迴圈(因爲已經被檔住了)，判斷完左邊換右邊，最後回傳棋子數量的變數是否大於等於 5 (如果要剛好等於 5 才勝利，改成等於就好了)

  ```js
  function horizontalWin(i, j, checkerboard) {
    let count = 1;
    for (let x = 1; x < 5; x++) {
      if (checkerboard[i][j] === checkerboard[i][j - x]) {
        count += 1;
      } else {
        break;
      }
    }
    for (let x = 1; x < 5; x++) {
      if (checkerboard[i][j] === checkerboard[i][j + x]) {
        count += 1;
      } else {
        break;
      }
    }
    return count >= 5;
  }
  ```

按照這個邏輯完成上下、左右、左上往右下，右上往左下，這四個方向，最後判斷是否有一個達到勝利條件

## 結論

以上就是思考的過程與考慮的點，感謝大家耐心的看完，之後會慢慢做一些小遊戲與大家分享，就耐心的期待吧(如果有人期待的話 XDD)~~如果喜歡，記得點讚與開啓小鈴鐺並追蹤我們的 IG~~
